---
title: Uso del control de acceso basado en roles
parent: Virtual Event 
grandparent: Experiences
description: In this topic you will learn how to use role-based access control to restrict the videos that appear in an experience based upon the user's role.
layout: staging
---
 <h1>Uso del control de acceso basado en roles</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <p>Si se requiere que los usuarios inicien sesión en su Experiencia de evento virtual, el control de acceso basado en roles se puede usar para filtrar los videos que se muestran a los usuarios según su rol. El control de acceso basado en roles se basa en un atributo SAML especificado en el objeto de usuario devuelto por el sistema de gestión de usuarios (es decir, sistema de registro, SSO). Las reglas se definen en función de los roles de usuario y las etiquetas de Video Cloud. Brightcove recomienda que todos los videos tengan una etiqueta para identificarlos para el evento, además de etiquetas adicionales para cualquier filtrado basado en roles que deba ocurrir.</p>
    <p>Para configurar el control de acceso basado en roles, comience por determinar cómo se restringirá el contenido y cree un archivo de configuración de acceso basado en roles apropiado. En las siguientes secciones se proporcionan algunas configuraciones de muestra. A continuación, asocie el archivo de configuración basado en roles con la experiencia. Finalmente, etiquete los videos de manera apropiada.</p>
    <aside class="bcls-aside bcls-aside--information">Nota: Al crear colecciones de videos, <strong>Listas de reproducción</strong> no debe usarse para los criterios de recopilación, ya que las listas de reproducción no admiten el filtrado de control de acceso basado en roles. Usar <strong>Personalizado</strong> criterios en su lugar.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="creating">Crear un archivo de configuración de acceso basado en roles</h2>
    <p>El control de acceso basado en roles se configura mediante un archivo de configuración de acceso basado en roles independiente. El formato del archivo es el siguiente:</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": ["premium"],
     "roleAttribute": "role",
     "valueDelimiter": ",",
     "ignoreByRole": {},
     "includeByRole": {},
     "allowByRole": {}
}   
   </code></pre>
    <p>Los valores de propiedad en el archivo controlan cómo se aplica el acceso a la experiencia.</p>
    <ul>
      <li><strong>AdvancedRoleFilter</strong>: cuando se establece en <strong>true</strong>, permite el control de acceso basado en roles</li>
      <li><strong>defaultIncludeTags</strong> - Las etiquetas que deben estar en todos los videos para que se muestren en Virtual Event Experience. Esto le permite mostrar solo un subconjunto de videos en la cuenta en Virtual Event Experience.</li>
      <li><strong>defaultIgnoreTags</strong> - Los videos con estas etiquetas no se mostrarán a los usuarios que no formen parte de un rol.</li>
      <li><strong>roleAttribute</strong> - Atributo SAML en el registro de usuario que proviene del sistema de gestión de usuarios. Se puede utilizar cualquier atributo SAML.</li>
      <li><strong>valueDelimiter</strong> - Delimitador utilizado para separar múltiples roles (si se pueden devolver múltiples roles)</li>
      <li><strong>ignoreByRole</strong> - Aumenta el <code translate="No">defaultIgnoreTags</code> al ignorar adicionalmente más etiquetas según la función del usuario. Esto se usa para eliminar aún más videos que el usuario puede ver según su función.</li>
      <li><strong>includeByRole</strong> - Los usuarios con la función asignada solo verán los videos con la etiqueta especificada</li>
      <li><strong>allowByRole</strong> - Aumenta el <code translate="No">defaultIncludeTags</code> agregando adicionalmente más etiquetas según el rol del usuario. Esto se usa para mostrar más videos a un usuario según su función. Los usuarios con el rol especificado verán videos etiquetados con <code translate="No">defaultIncludeTags</code> así como las etiquetas enumeradas aquí.</li>
    </ul>
    En las siguientes secciones se proporcionan algunos archivos de configuración de muestra.</section>
  <section class="bcls-section">
    <h2 id="single-premium">Rol de prima única</h2>
    <p>En este escenario, los usuarios generales pueden ver la mayoría del contenido, pero un subconjunto de contenido etiquetado con la etiqueta "premium" está disponible solo para los usuarios con el rol de "premium_user". Los usuarios Premium aún pueden ver todo el contenido que pueden ver los usuarios generales. El uso de una etiqueta "virtual_event" restringe el sitio para que solo muestre contenido de la cuenta etiquetada específicamente para el evento:</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": ["premium"],
     "roleAttribute": "role",
     "valueDelimiter": ",",
     "ignoreByRole": {},
     "includeByRole": {},
     "allowByRole": {
          "premium_user": ["premium"]
     }
}   
   </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="tiered-content">Acceso al contenido por niveles</h2>
    <p>Similar al primer escenario, pero con varios niveles donde cada nivel tiene acceso a más contenido y aún puede ver todo el contenido de los niveles inferiores. Los roles de usuario son "tier_1", "tier_2" y "tier_3", mientras que los usuarios sin uno de estos roles no verán ningún contenido escalonado. Las etiquetas son "tier1", "tier2" y "tier3" respectivamente:</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": ["tier1", "tier2", "tier3"],
     "roleAttribute": "role",
     "valueDelimiter": ",",
     "ignoreByRole": {},
     "includeByRole": {},
     "allowByRole": {
          "tier_1": ["tier1"],
          "tier_2": ["tier1", "tier2"],
          "tier_3": ["tier1", "tier2", "tier3"]
     } 
} 
      </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="split-content">Acceso dividido al contenido</h2>
    <p>En este ejemplo, los dos roles de usuario solo ven videos etiquetados específicamente para su rol. Un usuario sin una función no verá el contenido de ninguna de las etiquetas:</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": ["tag1", "tag2"],
     "roleAttribute": "role",
     "valueDelimiter": ",",
     "ignoreByRole": {},
     "includeByRole": {
          "role1": ["tag1"],
          "role2": ["tag2"]
     },
     "allowByRole": {}
}    
    </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="language">Segmentación por idioma</h2>
    <p>Utilizando el enfoque basado en la división, el contenido se puede publicar en función de un atributo SAML que contiene el idioma del usuario:</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": [],
     "roleAttribute": "language",
     "valueDelimiter": ",",
     "ignoreByRole": {},
     "includeByRole": {
          "en": ["english"],
          "es": ["spanish"],
          "jp": ["japanese"]
     },
     "allowByRole": {}
}     
      </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="merged-rules">Ejemplo de reglas fusionadas</h2>
    <p>Este ejemplo artificial ilustra cómo se pueden combinar las diferentes opciones. Un usuario general verá todo el contenido etiquetado como "virtual_event" que no está etiquetado como "premium". Un usuario con la función "premium_user" verá todo el contenido general más el contenido premium, pero no verá el contenido etiquetado como "promocional". Un usuario con una función "trial_user" verá contenido general y contenido premium, pero también verá contenido etiquetado como "promocional". Un usuario con la función "expired_user" solo verá los videos etiquetados como promocionales:</p>
    <pre><code translate="No">
{
     "advancedRoleFilter": "true",
     "defaultIncludeTags": ["virtual_event"],
     "defaultIgnoreTags": ["premium"],
     "roleAttribute": "role",
     "valueDelimiter": ",",
     "ignoreByRole": {
          "premium_user": ["promotional"]
     },
     "includeByRole": { "expired_user": ["promotional"]
     },
     "allowByRole": {
          "trial_user": ["promotional"],
          "premium_user": ["premium"]
     }
}
      </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="assign">Asignar un perfil de acceso basado en roles</h2>
    <p>Una vez que haya creado un perfil de acceso basado en roles para controlar el acceso al contenido, asócielo con la experiencia.</p>
    <ol class="bcls-tasklist">
      <li>Copie el perfil de control de acceso al portapapeles.</li>
      <li>Abra el módulo Galería.</li>
      <li>Edita la experiencia.</li>
      <li>Hacer clic <strong>APARIENCIA Y COMPORTAMIENTO&gt; Personalizado</strong> en la navegación de la izquierda.</li>
      <li>Pegue la configuración del perfil de acceso en el <strong>JSON de plantilla personalizada</strong> campo.
        <figure class="bcls-figure"><img class="bcls-image--no-border" alt="" src="/assets/images/experiences/virtual-event/rbac-json.png" /></figure>
        <aside class="bcls-aside bcls-aside--information">Nota: Si no se muestra este campo, la cuenta no se ha habilitado para el control de acceso basado en roles.</aside>
      </li>
      <li>Haz clic en<strong> Guardar</strong>.</li>
    </ol>
    <p>Asegúrese de <a href="/portal/previewing-and-publishing-portal-experience.html">volver a publicar la experiencia</a> para que aparezcan los cambios.</p>
  </section>
  <section class="bcls-section">
    <h2 id="attributes">Exponer atributos SAML</h2>
    <p>Para que la experiencia acceda al atributo de función de su proveedor de sistema de registro / SSO, asegúrese de que la configuración de SSO esté configurada correctamente.</p>
    <ol class="bcls-tasklist">
      <li>Abra el módulo Galería.</li>
      <li>Haga clic en el <strong>Ajustes</strong> enlace en la página de inicio de la Galería.</li>
      <li>En el panel de navegación de la izquierda, haga clic en <strong>Perfiles de control de acceso</strong>. Se mostrará una lista de perfiles de control de acceso creados.</li>
      <li>Haga clic en el icono de edición del perfil que utiliza Virtual Event Experience.</li>
      <li>Confirme que el <strong>Exponer todos los atributos</strong> La opción en la parte inferior de la página está marcada.
        <figure class="bcls-figure"><img class="bcls-image--no-border" alt="" src="/assets/images/experiences/virtual-event/rbac-expose-attributes.png" /></figure>
      </li>
      <li>Haz clic en<strong> Guardar</strong>.</li>
    </ol>
  </section>
</article>